<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BasicBoard4x4.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">sudoku_solver</a> &gt; <a href="index.source.html" class="el_package">dk.dtu.view.easy</a> &gt; <span class="el_source">BasicBoard4x4.java</span></div><h1>BasicBoard4x4.java</h1><pre class="source lang-java linenums">package dk.dtu.view.easy;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Optional;

import dk.dtu.controller.EasyChecker;
import dk.dtu.controller.SudokuButton;
import dk.dtu.view.medium.SudokuBoard;
import javafx.scene.control.Alert;
import javafx.scene.control.ButtonType;
import javafx.scene.control.TextField;
import javafx.scene.input.KeyEvent;
import javafx.scene.layout.GridPane;

<span class="nc" id="L18">public class BasicBoard4x4 {</span>
<span class="nc" id="L19">    static int sizeX = 600; // Justeret for et mindre vindue</span>
<span class="nc" id="L20">    static int sizeY = 600;</span>
<span class="nc" id="L21">    static int gridSize = 4; // 4x4 grid</span>
<span class="nc" id="L22">    static int btnSize = sizeX / gridSize; // Størrelse af hver knap</span>
<span class="nc" id="L23">    static int lastClickedRow = -1;</span>
<span class="nc" id="L24">    static int lastClickedColumn = -1;</span>
<span class="nc" id="L25">    static SudokuButton[][] buttons2D = new SudokuButton[gridSize][gridSize];</span>
    public static int[][] puzzleBoard;
    public static int[][] solvedBoard;
    public static String difficulty;

    public static boolean displayNum(int row, int column) {
        // Antager at du har en tilsvarende lagringsmekanisme for boardets tilstand
        // Returnerer true hvis der skal vises et nummer, ellers false
<span class="nc bnc" id="L33" title="All 2 branches missed.">        return Board4x4.grid[row][column] != 0;</span>
    }

    public static void createSudoku(GridPane pane) {
        /*
         * puzzleBoard = PuzzleGenerator.GenerateSudoku(difficulty);
         * solvedBoard = PuzzleGenerator.deepCopy(puzzleBoard);
         */

<span class="nc" id="L42">        pane.getChildren().clear(); // Ryd panelet for eksisterende komponenter</span>

<span class="nc bnc" id="L44" title="All 2 branches missed.">        for (int row = 0; row &lt; gridSize; row++) {</span>
<span class="nc bnc" id="L45" title="All 2 branches missed.">            for (int column = 0; column &lt; gridSize; column++) {</span>
<span class="nc bnc" id="L46" title="All 2 branches missed.">                String buttonText = displayNum(row, column) ? String.valueOf(Board4x4.grid[row][column]) : &quot;&quot;;</span>
<span class="nc" id="L47">                SudokuButton button = new SudokuButton(0); // Antager en tilsvarende konstruktør eksisterer</span>
<span class="nc" id="L48">                button.setPrefSize(btnSize, btnSize);</span>

<span class="nc" id="L50">                pane.add(button, column, row);</span>

<span class="nc" id="L52">                button.setText(buttonText);</span>
<span class="nc" id="L53">                button.setStyle(&quot;-fx-text-fill: black; -fx-font-size: 2em; -fx-font-weight: bold;&quot;);</span>

<span class="nc" id="L55">                buttons2D[row][column] = button;</span>

                // Tilføj event handler for klik på knappen
<span class="nc" id="L58">                int finalRow = row;</span>
<span class="nc" id="L59">                int finalColumn = column;</span>

<span class="nc" id="L61">                button.addEventFilter(KeyEvent.KEY_TYPED, event -&gt; {</span>
<span class="nc" id="L62">                    handleKeyPress(event, finalRow, finalColumn);</span>

<span class="nc" id="L64">                    solvedBoard[finalRow][finalColumn] = Integer.parseInt(event.getCharacter());</span>
<span class="nc" id="L65">                    Boolean isCompleted = EasyChecker.boardCompleted(solvedBoard);</span>
<span class="nc bnc" id="L66" title="All 2 branches missed.">                    if (isCompleted) {</span>
<span class="nc" id="L67">                        String time = SudokuBoard.finalTime;</span>

                        // Create a new alert
<span class="nc" id="L70">                        Alert alert = new Alert(Alert.AlertType.CONFIRMATION);</span>
<span class="nc" id="L71">                        alert.setTitle(&quot;Congratulations&quot;);</span>
<span class="nc" id="L72">                        alert.setHeaderText(&quot;Sudoku Completed! Your time was: &quot; + time);</span>

                        // Create a new TextField and set it as the graphic for the alert
<span class="nc" id="L75">                        TextField textField = new TextField(&quot;Input name&quot;);</span>
<span class="nc" id="L76">                        alert.getDialogPane().setContent(textField);</span>

                        // Add two buttons
<span class="nc" id="L79">                        ButtonType saveTimeBtn = new ButtonType(&quot;Save to leaderboards&quot;);</span>
<span class="nc" id="L80">                        ButtonType exitBtn = new ButtonType(&quot;Exit&quot;);</span>
<span class="nc" id="L81">                        alert.getButtonTypes().setAll(saveTimeBtn, exitBtn);</span>

                        // Show the alert and wait for the user to close it
<span class="nc" id="L84">                        Optional&lt;ButtonType&gt; result = alert.showAndWait();</span>
<span class="nc bnc" id="L85" title="All 2 branches missed.">                        if (result.get() == saveTimeBtn) {</span>
<span class="nc" id="L86">                            String name = textField.getText();</span>

                            ;

                            // Connect to the database
<span class="nc" id="L91">                            try (Connection conn = DriverManager.getConnection(</span>
                                    &quot;jdbc:postgresql://cornelius.db.elephantsql.com:5432/bvdlelci&quot;, &quot;bvdlelci&quot;,
                                    &quot;B1QrdKqxmTmhI1qgLU-XnZvRoIdC8fzq&quot;);
<span class="nc" id="L94">                                    Statement stmt = conn.createStatement()) {</span>

                                // Insert the name, time, and difficulty into the leaderboard table
<span class="nc" id="L97">                                stmt.executeUpdate(&quot;INSERT INTO leaderboard (name, time, difficulty) VALUES ('&quot; + name</span>
                                        + &quot;', '&quot; + time + &quot;', '&quot; + difficulty + &quot;')&quot;);
<span class="nc" id="L99">                                conn.close();</span>
<span class="nc" id="L100">                            } catch (SQLException e) {</span>
<span class="nc" id="L101">                                System.out.println(e.getMessage());</span>
<span class="nc" id="L102">                            }</span>
<span class="nc bnc" id="L103" title="All 2 branches missed.">                        } else if (result.get() == exitBtn) {</span>
                            // Handle &quot;Exit&quot; button click here
                        }
                    }
<span class="nc" id="L107">                });</span>

                // Tilføj sorte kanter for at adskille 2x2 bokse
<span class="nc bnc" id="L110" title="All 4 branches missed.">                if ((column + 1) % 2 == 0 &amp;&amp; column + 1 != gridSize) {</span>
<span class="nc" id="L111">                    button.setStyle(button.getStyle()</span>
                            + &quot;; -fx-border-width: 0 2 0 0; -fx-border-color: lightgrey black lightgrey lightgrey;&quot;);
                }
<span class="nc bnc" id="L114" title="All 4 branches missed.">                if ((row + 1) % 2 == 0 &amp;&amp; row + 1 != gridSize) {</span>
<span class="nc" id="L115">                    button.setStyle(button.getStyle()</span>
                            + &quot;; -fx-border-width: 0 0 2 0; -fx-border-color: lightgrey lightgrey black lightgrey;&quot;);
                }
<span class="nc bnc" id="L118" title="All 8 branches missed.">                if ((column + 1) % 2 == 0 &amp;&amp; column != gridSize - 1 &amp;&amp; (row + 1) % 2 == 0 &amp;&amp; row != gridSize - 1) {</span>
<span class="nc" id="L119">                    button.setStyle(button.getStyle()</span>
                            + &quot;; -fx-border-width: 0 2 2 0; -fx-border-color: lightgrey black black lightgrey;&quot;);
                }

<span class="nc" id="L123">                button.setOnAction(event -&gt; clickedButton(finalRow, finalColumn));</span>
            }
        }
<span class="nc" id="L126">    }</span>

    private static void clickedButton(int row, int column) {
        // Clear highlighting from the previously clicked row and column
<span class="nc" id="L130">        removeHighlighting();</span>

        // Highlight the entire row
<span class="nc bnc" id="L133" title="All 2 branches missed.">        for (int c = 0; c &lt; gridSize; c++) {</span>
<span class="nc" id="L134">            buttons2D[row][c].setStyle(buttons2D[row][c].getStyle()</span>
                    + &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;);
        }

        // Highlight the entire column
<span class="nc bnc" id="L139" title="All 2 branches missed.">        for (int r = 0; r &lt; gridSize; r++) {</span>
<span class="nc" id="L140">            buttons2D[r][column].setStyle(buttons2D[r][column].getStyle()</span>
                    + &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;);
        }

        // highlight the 2x2 box
<span class="nc" id="L145">        int boxRow = row / 2;</span>
<span class="nc" id="L146">        int boxColumn = column / 2;</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">        for (int r = boxRow * 2; r &lt; boxRow * 2 + 2; r++) {</span>
<span class="nc bnc" id="L148" title="All 2 branches missed.">            for (int c = boxColumn * 2; c &lt; boxColumn * 2 + 2; c++) {</span>
<span class="nc" id="L149">                buttons2D[r][c].setStyle(buttons2D[r][c].getStyle()</span>
                        + &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;);
            }
        }

        // highlight the clicked button
<span class="nc" id="L155">        buttons2D[row][column].setStyle(buttons2D[row][column].getStyle()</span>
                + &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #7997b3, #7997b3);&quot;);

        // Update the last clicked row and column
<span class="nc" id="L159">        lastClickedRow = row;</span>
<span class="nc" id="L160">        lastClickedColumn = column;</span>
<span class="nc" id="L161">    }</span>

    private static void removeHighlighting() {
<span class="nc bnc" id="L164" title="All 4 branches missed.">        if (lastClickedRow != -1 &amp;&amp; lastClickedColumn != -1) {</span>
            // Clear highlighting from the last clicked row
<span class="nc bnc" id="L166" title="All 2 branches missed.">            for (int c = 0; c &lt; gridSize; c++) {</span>
<span class="nc" id="L167">                buttons2D[lastClickedRow][c].setStyle(</span>
<span class="nc" id="L168">                        buttons2D[lastClickedRow][c].getStyle().replace(</span>
                                &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;,
                                &quot;&quot;));
            }

            // Clear highlighting from the last clicked column
<span class="nc bnc" id="L174" title="All 2 branches missed.">            for (int r = 0; r &lt; gridSize; r++) {</span>
<span class="nc" id="L175">                buttons2D[r][lastClickedColumn].setStyle(</span>
<span class="nc" id="L176">                        buttons2D[r][lastClickedColumn].getStyle().replace(</span>
                                &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;,
                                &quot;&quot;));
            }

            // clear the highlighting from the 2x2 box
<span class="nc" id="L182">            int boxRow = lastClickedRow / 2;</span>
<span class="nc" id="L183">            int boxColumn = lastClickedColumn / 2;</span>
<span class="nc bnc" id="L184" title="All 2 branches missed.">            for (int r = boxRow * 2; r &lt; boxRow * 2 + 2; r++) {</span>
<span class="nc bnc" id="L185" title="All 2 branches missed.">                for (int c = boxColumn * 2; c &lt; boxColumn * 2 + 2; c++) {</span>
<span class="nc" id="L186">                    buttons2D[r][c].setStyle(buttons2D[r][c].getStyle().replace(</span>
                            &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;,
                            &quot;&quot;));
                }
            }

            // clear the highlighting from the clicked button
<span class="nc" id="L193">            buttons2D[lastClickedRow][lastClickedColumn].setStyle(buttons2D[lastClickedRow][lastClickedColumn]</span>
<span class="nc" id="L194">                    .getStyle()</span>
<span class="nc" id="L195">                    .replace(</span>
                            &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #7997b3, #7997b3);&quot;,
                            &quot;&quot;));
        }
<span class="nc" id="L199">    }</span>

    private static void handleKeyPress(KeyEvent event, int row, int column) {
<span class="nc" id="L202">        String typedCharacter = event.getCharacter();</span>

        // Check if the key is a digit from 1 to 4
<span class="nc bnc" id="L205" title="All 2 branches missed.">        if (typedCharacter.matches(&quot;[1-4]&quot;)) {</span>
            // If the button is empty, set its text to the number
<span class="nc bnc" id="L207" title="All 2 branches missed.">            if (displayNum(row, column)) {</span>
            } else {
<span class="nc" id="L209">                buttons2D[row][column].setText(typedCharacter);</span>

            }
<span class="nc" id="L212">            event.consume();</span>
        }

<span class="nc bnc" id="L215" title="All 2 branches missed.">        for (row = 0; row &lt; gridSize; row++) {</span>
<span class="nc bnc" id="L216" title="All 2 branches missed.">            for (column = 0; column &lt; gridSize; column++) {</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">                if (typedCharacter.equals(buttons2D[row][column].getText())) {</span>
<span class="nc" id="L218">                    buttons2D[row][column]</span>
<span class="nc" id="L219">                            .setStyle(&quot;-fx-text-fill: blue; -fx-font-size: 2.0em; -fx-font-weight: bold;&quot;);</span>
<span class="nc" id="L220">                    blackBorder(buttons2D, row, column);</span>
                } else {
<span class="nc bnc" id="L222" title="All 2 branches missed.">                    if (displayNum(row, column)) {</span>
<span class="nc" id="L223">                        buttons2D[row][column]</span>
<span class="nc" id="L224">                                .setStyle(&quot;-fx-text-fill: black; -fx-font-size: 2.0em; -fx-font-weight: bold;&quot;);</span>
<span class="nc" id="L225">                        blackBorder(buttons2D, row, column);</span>
                    } else {
<span class="nc" id="L227">                        buttons2D[row][column]</span>
<span class="nc" id="L228">                                .setStyle(&quot;-fx-text-fill: dimgrey; -fx-font-size: 2.0em; -fx-font-weight: bold;&quot;);</span>
<span class="nc" id="L229">                        blackBorder(buttons2D, row, column);</span>
                    }
                }
            }
        }
<span class="nc" id="L234">    }</span>

    public static void blackBorder(SudokuButton[][] buttons, int row, int column) {
<span class="nc" id="L237">        SudokuButton button = buttons[row][column];</span>

        // Tilføj sorte kanter for at adskille 2x2 bokse
<span class="nc bnc" id="L240" title="All 4 branches missed.">        if ((column + 1) % 2 == 0 &amp;&amp; column + 1 != gridSize) {</span>
<span class="nc" id="L241">            button.setStyle(button.getStyle()</span>
                    + &quot;; -fx-border-width: 0 3 0 0; -fx-border-color: lightgrey black lightgrey lightgrey;&quot;);
        }
<span class="nc bnc" id="L244" title="All 4 branches missed.">        if ((row + 1) % 2 == 0 &amp;&amp; row + 1 != gridSize) {</span>
<span class="nc" id="L245">            button.setStyle(button.getStyle()</span>
                    + &quot;; -fx-border-width: 0 0 3 0; -fx-border-color: lightgrey lightgrey black lightgrey;&quot;);
        }
<span class="nc bnc" id="L248" title="All 8 branches missed.">        if ((column + 1) % 2 == 0 &amp;&amp; column != gridSize - 1 &amp;&amp; (row + 1) % 2 == 0 &amp;&amp; row != gridSize - 1) {</span>
<span class="nc" id="L249">            button.setStyle(button.getStyle()</span>
                    + &quot;; -fx-border-width: 0 3 3 0; -fx-border-color: lightgrey black black lightgrey;&quot;);
        }

<span class="nc" id="L253">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>