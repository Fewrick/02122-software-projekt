<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BasicBoard.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">sudoku_solver</a> &gt; <a href="index.source.html" class="el_package">dk.dtu.controller</a> &gt; <span class="el_source">BasicBoard.java</span></div><h1>BasicBoard.java</h1><pre class="source lang-java linenums">package dk.dtu.controller;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.Optional;

import dk.dtu.view.MainMenu;
import dk.dtu.view.medium.SudokuBoard;
import javafx.scene.layout.GridPane;
import javafx.scene.control.Alert;
import javafx.scene.control.ButtonType;
import javafx.scene.control.TextField;
import javafx.scene.input.KeyEvent;

<span class="nc" id="L17">public class BasicBoard {</span>
<span class="fc" id="L18">    private static int sizeX = 800;</span>
<span class="fc" id="L19">    private static int gridSize = 9;</span>
<span class="fc" id="L20">    private static int btnSize = sizeX / gridSize;</span>
<span class="fc" id="L21">    private static double fontSize = btnSize / 2;</span>
<span class="fc" id="L22">    private static int lastClickedRow = -1;</span>
<span class="fc" id="L23">    private static int lastClickedColumn = -1;</span>
<span class="fc" id="L24">    static SudokuButton[][] buttons2D = new SudokuButton[gridSize][gridSize];</span>
    public static int[][] puzzleBoard;
    public static int[][] solvedBoard;
    public static String difficulty;

    // Determines wether a number should be displayed or not =&gt; 0 = not displayed,
    // everything else = displayed
    public static boolean displayNum(int row, int column, int[][] board) {
<span class="fc bfc" id="L32" title="All 2 branches covered.">        if (board[row][column] == 0) {</span>
<span class="fc" id="L33">            return false;</span>
        } else {
<span class="fc" id="L35">            return true;</span>
        }
    }

    // Shows the solution to the puzzle by pulling the original board from the
    // PuzzleGenerator class
    public static void showSolution(GridPane pane) {
<span class="nc" id="L42">        puzzleBoard = PuzzleGenerator.originalBoard;</span>

<span class="nc bnc" id="L44" title="All 2 branches missed.">        for (int row = 0; row &lt; gridSize; row++) {</span>
<span class="nc bnc" id="L45" title="All 2 branches missed.">            for (int column = 0; column &lt; gridSize; column++) {</span>
<span class="nc" id="L46">                SudokuButton Button = new SudokuButton(0);</span>
<span class="nc" id="L47">                Button.setPrefSize(btnSize, btnSize); // Size of one cell</span>

<span class="nc" id="L49">                pane.add(Button, column, row);</span>

<span class="nc" id="L51">                Button.setText(&quot;&quot; + puzzleBoard[row][column]);</span>
<span class="nc" id="L52">                Button.setStyle(&quot;-fx-text-fill: dimgrey; -fx-font-size: &quot; + fontSize + &quot;px; -fx-font-weight: bold;&quot;);</span>

<span class="nc" id="L54">                buttons2D[row][column] = Button; // Add coordinates and accessibility to all buttons.</span>

                // Add event handler for button click
<span class="nc" id="L57">                int finalRow = row;</span>
<span class="nc" id="L58">                int finalColumn = column;</span>

<span class="nc" id="L60">                blackBorder(buttons2D, finalRow, finalColumn);</span>
            }
        }
<span class="nc" id="L63">    }</span>

    // Creates the sudoku board and displays it
    public static void createSudoku(GridPane pane, int boardSize, boolean unique) {
<span class="nc" id="L67">        gridSize = (int) Math.pow(boardSize, 2);</span>
<span class="nc" id="L68">        btnSize = sizeX / gridSize;</span>
<span class="nc" id="L69">        fontSize = btnSize * 0.20;</span>
<span class="nc" id="L70">        buttons2D = new SudokuButton[gridSize][gridSize];</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">        if (difficulty.equals(&quot;Custom&quot;)) {</span>
<span class="nc" id="L72">            puzzleBoard = PuzzleGenerator.generateBigSudoku(boardSize, unique);</span>

        } else {
<span class="nc" id="L75">            puzzleBoard = PuzzleGenerator.generateSudoku(difficulty);</span>

        }

<span class="nc" id="L79">        solvedBoard = PuzzleGenerator.deepCopy(puzzleBoard);</span>

<span class="nc bnc" id="L81" title="All 2 branches missed.">        for (int row = 0; row &lt; gridSize; row++) {</span>
<span class="nc bnc" id="L82" title="All 2 branches missed.">            for (int column = 0; column &lt; gridSize; column++) {</span>
                String buttonText;
<span class="nc bnc" id="L84" title="All 2 branches missed.">                if (displayNum(row, column, puzzleBoard)) {</span>
<span class="nc" id="L85">                    buttonText = &quot;&quot; + puzzleBoard[row][column];</span>
                } else {
<span class="nc" id="L87">                    buttonText = &quot;&quot;;</span>
                }

<span class="nc" id="L90">                SudokuButton Button = new SudokuButton(0);</span>

<span class="nc bnc" id="L92" title="All 2 branches missed.">                Button.setEditable(!displayNum(row, column, puzzleBoard));</span>

<span class="nc" id="L94">                Button.setPrefSize(btnSize, btnSize); // Size of one cell</span>

<span class="nc" id="L96">                pane.add(Button, column, row);</span>

<span class="nc" id="L98">                Button.setText(buttonText);</span>
<span class="nc" id="L99">                Button.setStyle(&quot;-fx-text-fill: black; -fx-font-size: &quot; + fontSize + &quot;px; -fx-font-weight: bold;&quot;);</span>

<span class="nc" id="L101">                buttons2D[row][column] = Button; // Add coordinates and accessibility to all buttons.</span>

                // Add event handler for button click
<span class="nc" id="L104">                int finalRow = row;</span>
<span class="nc" id="L105">                int finalColumn = column;</span>

<span class="nc" id="L107">                Button.addEventFilter(KeyEvent.KEY_TYPED, event -&gt; {</span>
<span class="nc" id="L108">                    handleKeyPress(event, finalRow, finalColumn);</span>

<span class="nc" id="L110">                });</span>

<span class="nc" id="L112">                Button.setOnAction(event -&gt; clickedButton(finalRow, finalColumn));</span>

<span class="nc" id="L114">                blackBorder(buttons2D, finalRow, finalColumn);</span>
            }
        }
<span class="nc" id="L117">    }</span>

    private static void clickedButton(int row, int column) {
        // Clear highlighting from the previously clicked row and column
<span class="nc" id="L121">        removeHighlighting();</span>

        // Highlight the entire row
<span class="nc bnc" id="L124" title="All 2 branches missed.">        for (int c = 0; c &lt; gridSize; c++) {</span>
<span class="nc" id="L125">            buttons2D[row][c].setStyle(buttons2D[row][c].getStyle()</span>
                    + &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;);
        }

        // Highlight the entire column
<span class="nc bnc" id="L130" title="All 2 branches missed.">        for (int r = 0; r &lt; gridSize; r++) {</span>
<span class="nc" id="L131">            buttons2D[r][column].setStyle(buttons2D[r][column].getStyle()</span>
                    + &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;);
        }

        // highlight the 3x3 box
<span class="nc bnc" id="L136" title="All 2 branches missed.">        for (int r = 0; r &lt; gridSize; r++) {</span>
<span class="nc bnc" id="L137" title="All 2 branches missed.">            for (int c = 0; c &lt; gridSize; c++) {</span>
<span class="nc bnc" id="L138" title="All 4 branches missed.">                if (r &gt;= row - row % Math.sqrt(gridSize) &amp;&amp; r &lt; row - row % Math.sqrt(gridSize) + Math.sqrt(gridSize)</span>
<span class="nc bnc" id="L139" title="All 2 branches missed.">                        &amp;&amp; c &gt;= column - column % Math.sqrt(gridSize)</span>
<span class="nc bnc" id="L140" title="All 2 branches missed.">                        &amp;&amp; c &lt; column - column % Math.sqrt(gridSize) + Math.sqrt(gridSize)) {</span>
<span class="nc" id="L141">                    buttons2D[r][c].setStyle(buttons2D[r][c].getStyle()</span>
                            + &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;);
                }
            }
        }

        // higlight the clicked button
<span class="nc" id="L148">        buttons2D[row][column].setStyle(buttons2D[row][column].getStyle()</span>
                + &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #7997b3, #7997b3);&quot;);

        // Update the last clicked row and column
<span class="nc" id="L152">        lastClickedRow = row;</span>
<span class="nc" id="L153">        lastClickedColumn = column;</span>
<span class="nc" id="L154">    }</span>

    private static void removeHighlighting() {
<span class="nc bnc" id="L157" title="All 4 branches missed.">        if (lastClickedRow != -1 &amp;&amp; lastClickedColumn != -1) {</span>
            // Clear highlighting from the last clicked row
<span class="nc bnc" id="L159" title="All 2 branches missed.">            for (int c = 0; c &lt; gridSize; c++) {</span>
<span class="nc" id="L160">                buttons2D[lastClickedRow][c].setStyle(</span>
<span class="nc" id="L161">                        buttons2D[lastClickedRow][c].getStyle().replace(</span>
                                &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;,
                                &quot;&quot;));
            }

            // Clear highlighting from the last clicked column
<span class="nc bnc" id="L167" title="All 2 branches missed.">            for (int r = 0; r &lt; gridSize; r++) {</span>
<span class="nc" id="L168">                buttons2D[r][lastClickedColumn].setStyle(</span>
<span class="nc" id="L169">                        buttons2D[r][lastClickedColumn].getStyle().replace(</span>
                                &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;,
                                &quot;&quot;));
            }

            // Clear highlighting from the 3x3 box
<span class="nc bnc" id="L175" title="All 2 branches missed.">            for (int r = 0; r &lt; gridSize; r++) {</span>
<span class="nc bnc" id="L176" title="All 2 branches missed.">                for (int c = 0; c &lt; gridSize; c++) {</span>
<span class="nc bnc" id="L177" title="All 2 branches missed.">                    if (r &gt;= lastClickedRow - lastClickedRow % Math.sqrt(gridSize)</span>
<span class="nc bnc" id="L178" title="All 2 branches missed.">                            &amp;&amp; r &lt; lastClickedRow - lastClickedRow % Math.sqrt(gridSize) + Math.sqrt(gridSize)</span>
<span class="nc bnc" id="L179" title="All 2 branches missed.">                            &amp;&amp; c &gt;= lastClickedColumn - lastClickedColumn % Math.sqrt(gridSize)</span>
<span class="nc bnc" id="L180" title="All 2 branches missed.">                            &amp;&amp; c &lt; lastClickedColumn - lastClickedColumn % Math.sqrt(gridSize) + Math.sqrt(gridSize)) {</span>
<span class="nc" id="L181">                        buttons2D[r][c].setStyle(</span>
<span class="nc" id="L182">                                buttons2D[r][c].getStyle().replace(</span>
                                        &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #9fb6cc, #8b9fb3);&quot;,
                                        &quot;&quot;));
                    }
                }
            }

            // Clear highlighting from the clicked button
<span class="nc" id="L190">            buttons2D[lastClickedRow][lastClickedColumn].setStyle(</span>
<span class="nc" id="L191">                    buttons2D[lastClickedRow][lastClickedColumn].getStyle().replace(</span>
                            &quot;; -fx-background-color: radial-gradient(focus-distance 0% , center 50% 50% , radius 60% , #7997b3, #7997b3);&quot;,
                            &quot;&quot;));
        }
<span class="nc" id="L195">    }</span>

    private static void handleKeyPress(KeyEvent event, int row, int column) {
        // Make sure the button is editable
<span class="nc bnc" id="L199" title="All 2 branches missed.">    if (!buttons2D[row][column].isEditable()) {</span>
<span class="nc" id="L200">        return;</span>
    }

<span class="nc" id="L203">    String typedCharacter = event.getCharacter();</span>
<span class="nc" id="L204">    String currentText = &quot;&quot;;</span>
    

<span class="nc bnc" id="L207" title="All 2 branches missed.">    if (typedCharacter.matches(&quot;[0-9]&quot;)) {</span>
        // If the typed character is a number, add it to the buffer only if it doesn't make the length more than 2
<span class="nc" id="L209">        currentText = buttons2D[row][column].getText();</span>
<span class="nc bnc" id="L210" title="All 2 branches missed.">        if (currentText.length() &lt; 2) {</span>
<span class="nc" id="L211">            buttons2D[row][column].setText(currentText + typedCharacter);</span>
<span class="nc" id="L212">            currentText = currentText + typedCharacter;</span>
        }
<span class="nc bnc" id="L214" title="All 2 branches missed.">    } else if (typedCharacter.equals(&quot;\b&quot;)) { // Check if the backspace key was pressed</span>
        // If the backspace key was pressed, remove the last character from the buffer
<span class="nc" id="L216">        currentText = buttons2D[row][column].getText();</span>
<span class="nc" id="L217">        buttons2D[row][column].setStyle(&quot;-fx-text-fill: black; -fx-font-size: &quot; + fontSize + &quot;px; -fx-font-weight: bold;&quot;);</span>
<span class="nc bnc" id="L218" title="All 2 branches missed.">        if (!currentText.isEmpty()) {</span>
<span class="nc" id="L219">            buttons2D[row][column].setText(currentText.substring(0, currentText.length() - 1));</span>
<span class="nc" id="L220">            currentText = buttons2D[row][column].getText();</span>
        }
<span class="nc bnc" id="L222" title="All 2 branches missed.">    } else if (typedCharacter.equals(&quot;\r&quot;)) { // Check if the enter key was pressed</span>
        // If the enter key was pressed, check the input
<span class="nc" id="L224">        String cellInput = buttons2D[row][column].getText();</span>
<span class="nc bnc" id="L225" title="All 2 branches missed.">        if (cellInput.matches(&quot;\\d{1,2}&quot;)) {</span>
            // If the input is a valid number, update the board
<span class="nc" id="L227">            solvedBoard[row][column] = Integer.parseInt(cellInput);</span>

            // Check if the board is completed and if the placement is valid
<span class="nc" id="L230">            boolean isCompleted = LogicSolver.isDone(solvedBoard);</span>
<span class="nc" id="L231">            boolean validPlacement = LogicSolver.validCheck(solvedBoard);</span>

<span class="nc bnc" id="L233" title="All 2 branches missed.">            if (!validPlacement) {</span>
<span class="nc" id="L234">                System.out.println(&quot;Mistake made&quot;);</span>
<span class="nc" id="L235">                buttons2D[row][column].setStyle(&quot;-fx-text-fill: red; -fx-font-size: &quot; + fontSize + &quot;px; -fx-font-weight: bold;&quot;);</span>
<span class="nc bnc" id="L236" title="All 2 branches missed.">                if (SudokuBoard.lifeOn == true) {</span>
<span class="nc" id="L237">                    SudokuBoard.mistakes++;</span>
<span class="nc" id="L238">                    SudokuBoard.lifeButton.setText(&quot;Mistakes: &quot; + SudokuBoard.mistakes + &quot;/3&quot;);</span>
                }
            }

<span class="nc bnc" id="L242" title="All 2 branches missed.">            if (SudokuBoard.mode == SudokuBoard.Mode.NUMBER) {</span>
<span class="nc" id="L243">                buttons2D[row][column].setDraft(false);</span>

<span class="nc bnc" id="L245" title="All 6 branches missed.">                if (!validPlacement &amp;&amp; SudokuBoard.mistakes == 3 &amp;&amp; SudokuBoard.lifeOn) {</span>
<span class="nc" id="L246">                    System.out.println(&quot;Game over&quot;);</span>
<span class="nc" id="L247">                    SudokuBoard.lifeButton.setText(&quot;Mistakes: 3/3&quot;);</span>
<span class="nc" id="L248">                    Alert alert = new Alert(Alert.AlertType.INFORMATION);</span>
<span class="nc" id="L249">                    alert.setTitle(&quot;Game over&quot;);</span>
<span class="nc" id="L250">                    alert.setHeaderText(&quot;You have made 3 mistakes. Game over&quot;);</span>
<span class="nc" id="L251">                    alert.showAndWait();</span>
<span class="nc" id="L252">                    closeSudokuBoard();</span>
<span class="nc" id="L253">                    MainMenu.mainMenuStage.show();</span>
<span class="nc" id="L254">                }</span>

<span class="nc bnc" id="L256" title="All 2 branches missed.">            } else if (SudokuBoard.mode == SudokuBoard.Mode.DRAFT) {</span>
<span class="nc" id="L257">                buttons2D[row][column].setDraft(true);</span>
<span class="nc" id="L258">                buttons2D[row][column].setStyle(&quot;-fx-text-fill: darksalmon; -fx-font-size: 1.5em; -fx-font-weight: bold;&quot;);</span>
            }

<span class="nc bnc" id="L261" title="All 4 branches missed.">                if (isCompleted &amp;&amp; validPlacement) {</span>
<span class="nc" id="L262">                    String time = SudokuBoard.finalTime;</span>

                    // Create a new alert
<span class="nc" id="L265">                    Alert alert = new Alert(Alert.AlertType.CONFIRMATION);</span>
<span class="nc" id="L266">                    alert.setTitle(&quot;Congratulations&quot;);</span>
<span class="nc" id="L267">                    alert.setHeaderText(</span>
                            &quot;Sudoku Completed! Your time was: &quot; + time + &quot; with &quot; + SudokuBoard.mistakes + &quot; mistakes&quot;);

                    // Create a new TextField and set it as the graphic for the alert
<span class="nc" id="L271">                    TextField textField = new TextField(&quot;Input name&quot;);</span>
<span class="nc" id="L272">                    alert.getDialogPane().setContent(textField);</span>

                    // Add two buttons
<span class="nc" id="L275">                    ButtonType saveTimeBtn = new ButtonType(&quot;Save to leaderboards&quot;);</span>
<span class="nc" id="L276">                    ButtonType exitBtn = new ButtonType(&quot;Exit&quot;);</span>
<span class="nc" id="L277">                    alert.getButtonTypes().setAll(saveTimeBtn, exitBtn);</span>

                    // Show the alert and wait for the user to close it
<span class="nc" id="L280">                    Optional&lt;ButtonType&gt; result = alert.showAndWait();</span>
<span class="nc bnc" id="L281" title="All 2 branches missed.">                    if (result.get() == saveTimeBtn) {</span>
<span class="nc" id="L282">                        String name = textField.getText();</span>

<span class="nc" id="L284">                        String query = &quot;INSERT INTO leaderboard (name, time, difficulty, mistakes) VALUES (?, ?, ?, ?)&quot;;</span>
                        // Connect to the database
<span class="nc" id="L286">                        try (Connection conn = DriverManager.getConnection(</span>
                                &quot;jdbc:postgresql://cornelius.db.elephantsql.com:5432/bvdlelci&quot;, &quot;bvdlelci&quot;,
                                &quot;B1QrdKqxmTmhI1qgLU-XnZvRoIdC8fzq&quot;);
<span class="nc" id="L289">                                PreparedStatement pStatement = conn.prepareStatement(query)) {</span>

                            // Insert the name, time, and difficulty into the leaderboard table
<span class="nc" id="L292">                            pStatement.setString(1, name);</span>
<span class="nc" id="L293">                            pStatement.setString(2, time);</span>
<span class="nc bnc" id="L294" title="All 2 branches missed.">                            if (difficulty.equals(&quot;Custom&quot;)) {</span>
<span class="nc" id="L295">                                difficulty = &quot;Custom &quot; + (int) Math.sqrt(gridSize) + &quot;x&quot; + (int) Math.sqrt(gridSize);</span>
                            }
<span class="nc" id="L297">                            pStatement.setString(3, difficulty);</span>
<span class="nc" id="L298">                            pStatement.setInt(4, SudokuBoard.mistakes);</span>
<span class="nc" id="L299">                            pStatement.executeUpdate();</span>
<span class="nc" id="L300">                            conn.close();</span>
<span class="nc" id="L301">                            closeSudokuBoard();</span>
<span class="nc" id="L302">                            MainMenu.mainMenuStage.show();</span>
<span class="nc" id="L303">                        } catch (SQLException e) {</span>
<span class="nc" id="L304">                            System.out.println(e.getMessage());</span>
<span class="nc" id="L305">                        }</span>
<span class="nc bnc" id="L306" title="All 2 branches missed.">                    } else if (result.get() == exitBtn) {</span>
                        // Handle &quot;Exit&quot; button click here
<span class="nc" id="L308">                        closeSudokuBoard();</span>
<span class="nc" id="L309">                        MainMenu.mainMenuStage.show();</span>
                    }
                }
<span class="nc" id="L312">            } else {</span>
                // If the input is not a valid number, clear the buffer
<span class="nc" id="L314">                buttons2D[row][column].setText(&quot;&quot;);</span>
            }
        }

<span class="nc" id="L318">        event.consume();</span>

<span class="nc bnc" id="L320" title="All 2 branches missed.">        for (row = 0; row &lt; gridSize; row++) {</span>
<span class="nc bnc" id="L321" title="All 2 branches missed.">            for (column = 0; column &lt; gridSize; column++) {</span>
<span class="nc bnc" id="L322" title="All 2 branches missed.">                if (buttons2D[row][column].isDraft()) {</span>
<span class="nc" id="L323">                    buttons2D[row][column]</span>
<span class="nc" id="L324">                            .setStyle(&quot;-fx-text-fill: darksalmon; -fx-font-size: 0.5px; -fx-font-weight: bold;&quot;);</span>
<span class="nc" id="L325">                    blackBorder(buttons2D, row, column);</span>
<span class="nc bnc" id="L326" title="All 2 branches missed.">                } else if (currentText.equals(buttons2D[row][column].getText())) {</span>
<span class="nc bnc" id="L327" title="All 2 branches missed.">                    if (!buttons2D[row][column].getStyle().contains(&quot;red&quot;)) { // Check if the text color is already red</span>
<span class="nc" id="L328">                        buttons2D[row][column]</span>
<span class="nc" id="L329">                                .setStyle(&quot;-fx-text-fill: blue; -fx-font-size: &quot; + fontSize + &quot;px; -fx-font-weight: bold;&quot;);</span>
                    }
<span class="nc" id="L331">                    blackBorder(buttons2D, row, column);</span>
<span class="nc bnc" id="L332" title="All 2 branches missed.">                } else if (displayNum(row, column, puzzleBoard)) {</span>
<span class="nc bnc" id="L333" title="All 2 branches missed.">                    if (!buttons2D[row][column].getStyle().contains(&quot;red&quot;)) { // Check if the text color is already red</span>
<span class="nc" id="L334">                        buttons2D[row][column]</span>
<span class="nc" id="L335">                                .setStyle(</span>
                                        &quot;-fx-text-fill: black; -fx-font-size: &quot; + fontSize + &quot;px; -fx-font-weight: bold;&quot;);
                    }
<span class="nc" id="L338">                    blackBorder(buttons2D, row, column);</span>
                } else {
<span class="nc bnc" id="L340" title="All 2 branches missed.">                    if (!buttons2D[row][column].getStyle().contains(&quot;red&quot;)) { // Check if the text color is already red</span>
<span class="nc" id="L341">                        buttons2D[row][column]</span>
<span class="nc" id="L342">                                .setStyle(&quot;-fx-text-fill: dimgrey; -fx-font-size: &quot; + fontSize</span>
                                        + &quot;px; -fx-font-weight: bold;&quot;);
                    }
<span class="nc" id="L345">                    blackBorder(buttons2D, row, column);</span>
                }
    
            }
        }
<span class="nc" id="L350">    }</span>

    private static void closeSudokuBoard() {
<span class="nc" id="L353">        SudokuBoard.boardStage.close();</span>

<span class="nc" id="L355">        SudokuBoard.bottom.getChildren().clear();</span>
<span class="nc" id="L356">        SudokuBoard.pane.getChildren().clear();</span>
<span class="nc" id="L357">        SudokuBoard.borderPane.getChildren().clear();</span>
<span class="nc" id="L358">        SudokuBoard.topVbox.getChildren().clear();</span>
<span class="nc" id="L359">        SudokuBoard.leftVbox.getChildren().clear();</span>
<span class="nc" id="L360">        SudokuBoard.rightVbox.getChildren().clear();</span>



<span class="nc" id="L364">        SudokuBoard.timeline.stop();</span>
<span class="nc" id="L365">        SudokuBoard.timeline.getKeyFrames().clear();</span>
<span class="nc" id="L366">        SudokuBoard. timeString = &quot;00:00&quot;;</span>
<span class="nc" id="L367">        SudokuBoard.seconds = 0;</span>
<span class="nc" id="L368">        SudokuBoard.minutes = 0;</span>
<span class="nc" id="L369">        SudokuBoard.timer.setText(&quot;Timer: &quot; + SudokuBoard.timeString);</span>
<span class="nc" id="L370">        SudokuBoard.mistakes = 0;</span>
<span class="nc" id="L371">    }</span>

    public static void blackBorder(SudokuButton[][] buttons, int row, int column) {
<span class="nc" id="L374">        SudokuButton button = buttons[row][column];</span>

        // Add black borders to separate 3x3 boxes
<span class="nc bnc" id="L377" title="All 4 branches missed.">        if ((column + 1) % Math.sqrt(gridSize) == 0 &amp;&amp; column + 1 != gridSize) {</span>
<span class="nc" id="L378">            button.setStyle(button.getStyle() + &quot;; -fx-border-color: black; -fx-border-width: 0 3px 0 0;&quot;);</span>
        }
<span class="nc bnc" id="L380" title="All 4 branches missed.">        if ((row + 1) % Math.sqrt(gridSize) == 0 &amp;&amp; row + 1 != gridSize) {</span>
<span class="nc" id="L381">            button.setStyle(button.getStyle() + &quot;; -fx-border-color: black; -fx-border-width: 0 0 3px 0;&quot;);</span>
        }
<span class="nc bnc" id="L383" title="All 8 branches missed.">        if ((column + 1) % Math.sqrt(gridSize) == 0 &amp;&amp; column != gridSize - 1 &amp;&amp; (row + 1) % Math.sqrt(gridSize) == 0</span>
                &amp;&amp; row != gridSize - 1) {
<span class="nc" id="L385">            button.setStyle(button.getStyle() + &quot;; -fx-border-color: black; -fx-border-width: 0 3px 3px 0;&quot;);</span>
        }
<span class="nc" id="L387">    }</span>

    public static void showHint() {
<span class="nc" id="L390">        puzzleBoard = PuzzleGenerator.originalBoard;</span>
        // Find the first empty cell
<span class="nc" id="L392">        int row = 0;</span>
<span class="nc" id="L393">        int column = 0;</span>
<span class="nc" id="L394">        boolean found = false;</span>

<span class="nc bnc" id="L396" title="All 2 branches missed.">        for (row = 0; row &lt; gridSize; row++) {</span>
<span class="nc bnc" id="L397" title="All 2 branches missed.">            for (column = 0; column &lt; gridSize; column++) {</span>
<span class="nc bnc" id="L398" title="All 2 branches missed.">                if (solvedBoard[row][column] == 0) {</span>
<span class="nc" id="L399">                    found = true;</span>
<span class="nc" id="L400">                    break;</span>
                }
            }
<span class="nc bnc" id="L403" title="All 2 branches missed.">            if (found) {</span>
                // choose one empty cell and show the value from the solvedboard
                // take the empty cell and show the value from the solvedboard
                // make the text color black and set the button to not editable
<span class="nc" id="L407">                buttons2D[row][column].setText(&quot;&quot; + puzzleBoard[row][column]);</span>
<span class="nc" id="L408">                buttons2D[row][column]</span>
<span class="nc" id="L409">                        .setStyle(&quot;-fx-text-fill: black; -fx-font-size: &quot; + fontSize + &quot;px; -fx-font-weight: bold;&quot;);</span>
<span class="nc" id="L410">                buttons2D[row][column].setEditable(false);</span>
<span class="nc" id="L411">                solvedBoard[row][column] = puzzleBoard[row][column];</span>
<span class="nc" id="L412">                blackBorder(buttons2D, row, column);</span>
<span class="nc" id="L413">                break;</span>
            }
        }
<span class="nc" id="L416">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>